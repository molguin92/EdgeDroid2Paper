\section{A model of human behavior for \ac{WCA}}\label{sec:model}


In order to accurately emulate the behavior of a human, a model for \ac{WCA} needs to implement two main behaviors.
One, it needs to generate realistic execution times for each step in the task, considering the current and historical impairment of the \ac{WCA} system.
And two, it needs to produce sequences of input samples for each step mimicking what a real human would generate.

\subsection{Generating realistic execution times}

For the sub-model for the generation of realistic execution times, we employ a cleaned and re-parameterized copy of the timing data collected for~\cite{olguinmunoz:impact2021}.
The data consists of timing information for each of the \num{169} steps performed by the \num{40} participants in the human-subject trials.
The resulting \num{6760} data points are arranged in a table, a sample of which can be seen in \cref{tab:data:exectime}, together with identifiers for the subjects and a normalized value of their neuroticism.

\begin{table}
\centering
\caption[A]{%
    Sample of the execution time data  used for the elaboration of the timing model.
    Rows contain the execution times and \acp{TTF} for each of the \num{169} steps performed by the \num{40} participants in \textcite{olguinmunoz:impact2021}, expressed in seconds, together with a unique identifier for the subject, their associated level of normalized neuroticism, and a sequence number identifying the position of the step in the task.
}\label{tab:data:exectime}
\begin{tabular}{rrrrrr}
    \toprule
    {seq} & {run\_id} & {exec\_time} & {ttf} & {neuroticism}\\
    \midrule
    1 & 134146 & 3.655 & 0.597 & 0.375\\
    2 & 134146 & 4.439 & 0.554 & 0.375\\
    3 & 134146 & 2.943 & 0.562 & 0.375\\
    \( \cdots \) & \( \cdots \) & \( \cdots \) & \( \cdots \) & \( \cdots \) \\
    169 & 134146 & 3.532 & 4.571 & 0.375\\
    1 & 134470 & 3.461 & 0.561 & 0.594\\
    2 & 134470 & 6.678 & 0.572 & 0.594\\
    \( \cdots \) & \( \cdots \) & \( \cdots \) & \( \cdots \) & \( \cdots \) \\
    \( \cdots \) & \( \cdots \) & \( \cdots \) & \( \cdots \) & \( \cdots \) \\
    169 & 137353 & 4.615 & 0.537 & 0.625\\
    \bottomrule
    \end{tabular}
\end{table}  



\subsection{Generating realistic frame samples}

\todo[inline]{Diagram of model?}
\todo[inline]{Verification: do we need the model? (Compare to naive)}

\begin{algorithm}
    \caption{Timing model algorithm}
    \KwIn{%
        \begin{itemize}
            \item $T_\text{start}$: start timestamp of the previous step.
            \item $T_\text{success}$: capture timestamp of the succesful sample of the previous step.
            \item $T_\text{end}$: end timestamp of the previous step.
            \item $t_\text{exec}$: execution time (in seconds) of the previous step.
        \end{itemize}%
    }
    \KwOut{$t_\text{exec}'$: execution time for the current step.}

    \Comment{%
        Initial values:\\
        $d \leftarrow 0$\\
        $I_\text{prev} \leftarrow \text{NULL}$
    }
    $t_\text{wait} \leftarrow T_\text{success} - (T_\text{start} + t_\text{exec})$\;
    $t_\text{round-trip} \leftarrow T_\text{end} - T_\text{success}$\;
    $i \leftarrow t_\text{wait} + t_\text{round-trip}$ \Comment*[r]{raw impairment}
    $I \leftarrow \text{BIN}(i)$ \Comment*[r]{bin impairment into\\discrete levels}

    \If{$I_\text{prev} == \text{NULL}$}{%
        $d \leftarrow 1$\;
        $T \leftarrow \text{NO TRANSITION}$\;
    } \ElseIf{$I_\text{prev} < I$}{%
        $d \leftarrow 1$\;
        $T \leftarrow \text{LOWER TO HIGHER} $
    } \ElseIf{$I_\text{prev} > I$}{%
        $d \leftarrow 1$\;
        $T \leftarrow \text{HIGHER TO LOWER} $  
    }

\end{algorithm}


This data is first preprocessed and then sampled according to a series of rules in order to produce novel,realistic sequences of execution times for a task.
Alternatively, instead of sampling directly from the preprocessed data, a theoretical distribution can be fitted, thus allowing for generation of realistic synthetic execution times.

\subsubsection{Data pre-processing}

A sample of the step timing data obtained for~\cite{olguinmunoz:impact2021} is presented in \cref{tab:exec_times:empirical}.
This data corresponds to real step execution times for \num{40} repetitions, by different human subjects, of the same \num{169}-step task.
During each repetition of the task, system responsiveness was altered in real time by setting the round-trip-times of all frames to a fixed value (corresponding to the \emph{delay} column in \cref{tab:exec_times:empirical}).
For more details on the experimental design and data collection procedure, please see the original article~\cite{olguinmunoz:impact2021}.

We process this data in the following manner:

\input{tables/processed_exec_times.tex}

\begin{enumerate}
    \item Normalized neuroticism values are binned into predefined, contiguous bins.
    We use three bins with edges
    \( \left(-\infty, \frac{1}{3}\right) \),
    \( \left[\frac{1}{3}, \frac{2}{3}\right) \),
    and \( \left[\frac{2}{3}, \infty\right) \),
    as these give the most even distribution of number of samples across bins.

    \item System impairment (\emph{delay}) is binned into predefined, contiguous bins.
    Once again, we use three bins giving a somewhat even distribution of samples:
    \( \left(-\infty, 1.0\right) \),
    \( \left[1.0, 2.0\right) \),
    and \( \left[2.0, \infty\right) \) seconds.

    \item A predefined number of steps (by default, \num{8}) immediately after each change in binned impairment are marked according to the relative change in impairment: \emph{low-to-high}, or \emph{high-to-low} impairment.
    We label this value the \emph{transition tag}.
    Steps at the beginning of the task (where there is no previous impairment), or too far away from a transition in impairment, are tagged as \emph{no transition}.

    \item Each step in a sequence tagged with the same transition tag is assigned a sequential \emph{duration} number.
    This value tracks how long the system has been in a specific state, and is in turn binned into three bins:
    \( \left[0, 5\right) \),
    \( \left[5, 10\right) \),
    and \( \left[10, \infty\right) \) steps.

    \item Finally, execution times are shifted by one step.
    This is because the execution time of a step depends on the state of the previous step, and not the current one.
    As explained previously, humans only becomes aware of the responsiveness of the system when they finish a step and have to wait for feedback from the system.
\end{enumerate}


\subsection{Generating a synthetic trace of frames}

\subsection{Model implementation}

The model is provided as a Python~\num{3.10} library which includes \acp{API} for the generation of realistic execution times and synthetic traces of video frames.

\subsection{Verifying the model}